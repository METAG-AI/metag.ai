import{K as e,a as t,b as r,C as o}from"./toConsumableArray-7c708e55.js";import{T as s,C as n}from"./index-8314b60a.js";import{c as i}from"./index-f246fd73.js";import{o as a}from"./Compact-4420e2ad.js";import{r as l}from"./index-ef096646.js";import{o as c,X as u,x as p,F as d,p as g,ac as m,g as f,m as b,y,a as h}from"./index-d394c8d7.js";var k=0,v=u();const $=function(e){var t=l.useState(),r=c(t,2),o=r[0],s=r[1];return l.useEffect((function(){var e;s("rc_progress_".concat((v?(e=k,k+=1):e="TEST_OR_SSR",e)))}),[]),e||o};var C=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function x(e){return+e.replace("%","")}function S(e){var t=null!=e?e:[];return Array.isArray(t)?t:[t]}var E=100,w=function(e,t,r,o,s,n,i,a,l,c){var u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,p=r/100*360*((360-n)/360),d=0===n?0:{bottom:0,top:180,left:90,right:-90}[i],g=(100-o)/100*t;return"round"===l&&100!==o&&(g+=c/2)>=t&&(g=t-.01),{stroke:"string"==typeof a?a:void 0,strokeDasharray:"".concat(t,"px ").concat(e),strokeDashoffset:g+u,transform:"rotate(".concat(s+p+d,"deg)"),transformOrigin:"0 0",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},O=function(e){var t,r,o,s,n,a=e.id,c=e.prefixCls,u=e.steps,m=e.strokeWidth,f=e.trailWidth,b=e.gapDegree,y=void 0===b?0:b,h=e.gapPosition,k=e.trailColor,v=e.strokeLinecap,O=e.style,j=e.className,I=e.strokeColor,N=e.percent,D=p(e,C),P=$(a),W="".concat(P,"-gradient"),R=50-m/2,A=2*Math.PI*R,M=y>0?90+y/2:-90,z=A*((360-y)/360),L="object"===d(u)?u:{count:u,space:2},T=L.count,X=L.space,_=w(A,z,0,100,M,y,h,k,v,m),B=S(N),F=S(I),H=F.find((function(e){return e&&"object"===d(e)})),K=(t=l.useRef([]),r=l.useRef(null),l.useEffect((function(){var e=Date.now(),o=!1;t.current.forEach((function(t){if(t){o=!0;var s=t.style;s.transitionDuration=".3s, .3s, .3s, .06s",r.current&&e-r.current<100&&(s.transitionDuration="0s, 0s")}})),o&&(r.current=Date.now())})),t.current);return l.createElement("svg",g({className:i("".concat(c,"-circle"),j),viewBox:"".concat(-50," ").concat(-50," ").concat(E," ").concat(E),style:O,id:a,role:"presentation"},D),H&&l.createElement("defs",null,l.createElement("linearGradient",{id:W,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(H).sort((function(e,t){return x(e)-x(t)})).map((function(e,t){return l.createElement("stop",{key:t,offset:e,stopColor:H[e]})})))),!T&&l.createElement("circle",{className:"".concat(c,"-circle-trail"),r:R,cx:0,cy:0,stroke:k,strokeLinecap:v,strokeWidth:f||m,style:_}),T?(o=Math.round(T*(B[0]/100)),s=100/T,n=0,new Array(T).fill(null).map((function(e,t){var r=t<=o-1?F[0]:k,i=r&&"object"===d(r)?"url(#".concat(W,")"):void 0,a=w(A,z,n,s,M,y,h,r,"butt",m,X);return n+=100*(z-a.strokeDashoffset+X)/z,l.createElement("circle",{key:t,className:"".concat(c,"-circle-path"),r:R,cx:0,cy:0,stroke:i,strokeWidth:m,opacity:1,style:a,ref:function(e){K[t]=e}})}))):function(){var e=0;return B.map((function(t,r){var o=F[r]||F[F.length-1],s=o&&"object"===d(o)?"url(#".concat(W,")"):void 0,n=w(A,z,e,t,M,y,h,o,v,m);return e+=t,l.createElement("circle",{key:r,className:"".concat(c,"-circle-path"),r:R,cx:0,cy:0,stroke:s,strokeLinecap:v,strokeWidth:m,opacity:0===t?0:1,style:n,ref:function(e){K[r]=e}})})).reverse()}())};function j(e){return!e||e<0?0:e>100?100:e}function I(e){let{success:t,successPercent:r}=e,o=r;return t&&"progress"in t&&(o=t.progress),t&&"percent"in t&&(o=t.percent),o}O.defaultProps={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},O.displayName="Circle";const N=e=>{let{percent:t,success:r,successPercent:o}=e;const s=j(I({success:r,successPercent:o}));return[s,j(j(t)-s)]},D=(e,t,r)=>{var o,s,n,i;let a=-1,l=-1;if("step"===t){const t=r.steps,o=r.strokeWidth;"string"==typeof e||void 0===e?(a="small"===e?2:14,l=null!=o?o:8):"number"==typeof e?[a,l]=[e,e]:[a=14,l=8]=e,a*=t}else if("line"===t){const t=null==r?void 0:r.strokeWidth;"string"==typeof e||void 0===e?l=t||("small"===e?6:8):"number"==typeof e?[a,l]=[e,e]:[a=-1,l=8]=e}else"circle"!==t&&"dashboard"!==t||("string"==typeof e||void 0===e?[a,l]="small"===e?[60,60]:[120,120]:"number"==typeof e?[a,l]=[e,e]:(a=null!==(s=null!==(o=e[0])&&void 0!==o?o:e[1])&&void 0!==s?s:120,l=null!==(i=null!==(n=e[0])&&void 0!==n?n:e[1])&&void 0!==i?i:120));return[a,l]},P=e=>{const{prefixCls:t,trailColor:r=null,strokeLinecap:o="round",gapPosition:n,gapDegree:a,width:c=120,type:u,children:p,success:d,size:g=c}=e,[f,b]=D(g,"circle");let{strokeWidth:y}=e;void 0===y&&(y=Math.max((e=>3/e*100)(f),6));const h={width:f,height:b,fontSize:.15*f+6},k=l.useMemo((()=>a||0===a?a:"dashboard"===u?75:void 0),[a,u]),v=n||"dashboard"===u&&"bottom"||void 0,$="[object Object]"===Object.prototype.toString.call(e.strokeColor),C=(e=>{let{success:t={},strokeColor:r}=e;const{strokeColor:o}=t;return[o||m.green,r||null]})({success:d,strokeColor:e.strokeColor}),x=i(`${t}-inner`,{[`${t}-circle-gradient`]:$}),S=l.createElement(O,{percent:N(e),strokeWidth:y,trailWidth:y,strokeColor:C,strokeLinecap:o,trailColor:r,prefixCls:t,gapDegree:k,gapPosition:v});return l.createElement("div",{className:x,style:h},f<=20?l.createElement(s,{title:p},l.createElement("span",null,S)):l.createElement(l.Fragment,null,S,p))};var W=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]])}return r};const R=(e,t)=>{const{from:r=m.blue,to:o=m.blue,direction:s=("rtl"===t?"to left":"to right")}=e,n=W(e,["from","to","direction"]);if(0!==Object.keys(n).length){return{backgroundImage:`linear-gradient(${s}, ${(e=>{let t=[];return Object.keys(e).forEach((r=>{const o=parseFloat(r.replace(/%/g,""));isNaN(o)||t.push({key:o,value:e[r]})})),t=t.sort(((e,t)=>e.key-t.key)),t.map((e=>{let{key:t,value:r}=e;return`${r} ${t}%`})).join(", ")})(n)})`}}return{backgroundImage:`linear-gradient(${s}, ${r}, ${o})`}},A=e=>{const{prefixCls:t,direction:r,percent:o,size:s,strokeWidth:n,strokeColor:i,strokeLinecap:a="round",children:c,trailColor:u=null,success:p}=e,d=i&&"string"!=typeof i?R(i,r):{backgroundColor:i},g="square"===a||"butt"===a?0:void 0,m={backgroundColor:u||void 0,borderRadius:g},f=null!=s?s:[-1,n||("small"===s?6:8)],[b,y]=D(f,"line",{strokeWidth:n}),h=Object.assign({width:`${j(o)}%`,height:y,borderRadius:g},d),k=I(e),v={width:`${j(k)}%`,height:y,borderRadius:g,backgroundColor:null==p?void 0:p.strokeColor},$={width:b<0?"100%":b,height:y};return l.createElement(l.Fragment,null,l.createElement("div",{className:`${t}-outer`,style:$},l.createElement("div",{className:`${t}-inner`,style:m},l.createElement("div",{className:`${t}-bg`,style:h}),void 0!==k?l.createElement("div",{className:`${t}-success-bg`,style:v}):null)),c)},M=e=>{const{size:t,steps:r,percent:o=0,strokeWidth:s=8,strokeColor:n,trailColor:a=null,prefixCls:c,children:u}=e,p=Math.round(r*(o/100)),d=null!=t?t:["small"===t?2:14,s],[g,m]=D(d,"step",{steps:r,strokeWidth:s}),f=g/r,b=new Array(r);for(let y=0;y<r;y++){const e=Array.isArray(n)?n[y]:n;b[y]=l.createElement("div",{key:y,className:i(`${c}-steps-item`,{[`${c}-steps-item-active`]:y<=p-1}),style:{backgroundColor:y<=p-1?e:a,width:f,height:m}})}return l.createElement("div",{className:`${c}-steps-outer`},b,u)},z=t=>{const r=t?"100%":"-100%";return new e(`antProgress${t?"RTL":"LTR"}Active`,{"0%":{transform:`translateX(${r}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${r}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},L=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:Object.assign(Object.assign({},y(e)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize,marginInlineEnd:e.marginXS,marginBottom:e.marginXS},[`${t}-outer`]:{display:"inline-block",width:"100%"},[`&${t}-show-info`]:{[`${t}-outer`]:{marginInlineEnd:`calc(-2em - ${e.marginXS}px)`,paddingInlineEnd:`calc(2em + ${e.paddingXS}px)`}},[`${t}-inner`]:{position:"relative",display:"inline-block",width:"100%",overflow:"hidden",verticalAlign:"middle",backgroundColor:e.progressRemainingColor,borderRadius:e.progressLineRadius},[`${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorInfo}},[`${t}-success-bg, ${t}-bg`]:{position:"relative",backgroundColor:e.colorInfo,borderRadius:e.progressLineRadius,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`},[`${t}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess},[`${t}-text`]:{display:"inline-block",width:"2em",marginInlineStart:e.marginXS,color:e.progressInfoTextColor,lineHeight:1,whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[r]:{fontSize:e.fontSize}},[`&${t}-status-active`]:{[`${t}-bg::before`]:{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.progressLineRadius,opacity:0,animationName:z(),animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${t}-rtl${t}-status-active`]:{[`${t}-bg::before`]:{animationName:z(!0)}},[`&${t}-status-exception`]:{[`${t}-bg`]:{backgroundColor:e.colorError},[`${t}-text`]:{color:e.colorError}},[`&${t}-status-exception ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorError}},[`&${t}-status-success`]:{[`${t}-bg`]:{backgroundColor:e.colorSuccess},[`${t}-text`]:{color:e.colorSuccess}},[`&${t}-status-success ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorSuccess}}})}},T=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-circle-trail`]:{stroke:e.progressRemainingColor},[`&${t}-circle ${t}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${t}-circle ${t}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.colorText,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[r]:{fontSize:e.fontSize/e.fontSizeSM+"em"}},[`${t}-circle&-status-exception`]:{[`${t}-text`]:{color:e.colorError}},[`${t}-circle&-status-success`]:{[`${t}-text`]:{color:e.colorSuccess}}},[`${t}-inline-circle`]:{lineHeight:1,[`${t}-inner`]:{verticalAlign:"bottom"}}}},X=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.progressRemainingColor,transition:`all ${e.motionDurationSlow}`,"&-active":{backgroundColor:e.colorInfo}}}}}},_=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-small&-line, ${t}-small&-line ${t}-text ${r}`]:{fontSize:e.fontSizeSM}}}},B=f("Progress",(e=>{const t=e.marginXXS/2,r=b(e,{progressLineRadius:100,progressInfoTextColor:e.colorText,progressDefaultColor:e.colorInfo,progressRemainingColor:e.colorFillSecondary,progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[L(r),T(r),X(r),_(r)]}));var F=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]])}return r};const H=["normal","exception","active","success"],K=l.forwardRef(((e,s)=>{const{prefixCls:c,className:u,rootClassName:p,steps:d,strokeColor:g,percent:m=0,size:f="default",showInfo:b=!0,type:y="line",status:k,format:v,style:$}=e,C=F(e,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format","style"]),x=l.useMemo((()=>{var t,r;const o=I(e);return parseInt(void 0!==o?null===(t=null!=o?o:0)||void 0===t?void 0:t.toString():null===(r=null!=m?m:0)||void 0===r?void 0:r.toString(),10)}),[m,e.success,e.successPercent]),S=l.useMemo((()=>!H.includes(k)&&x>=100?"success":k||"normal"),[k,x]),{getPrefixCls:E,direction:w,progress:O}=l.useContext(h),N=E("progress",c),[W,R]=B(N),z=l.useMemo((()=>{if(!b)return null;const s=I(e);let i;const a="line"===y;return v||"exception"!==S&&"success"!==S?i=(v||(e=>`${e}%`))(j(m),j(s)):"exception"===S?i=a?l.createElement(t,null):l.createElement(r,null):"success"===S&&(i=a?l.createElement(o,null):l.createElement(n,null)),l.createElement("span",{className:`${N}-text`,title:"string"==typeof i?i:void 0},i)}),[b,m,x,S,y,N,v]),L=Array.isArray(g)?g[0]:g,T="string"==typeof g||Array.isArray(g)?g:void 0;let X;"line"===y?X=d?l.createElement(M,Object.assign({},e,{strokeColor:T,prefixCls:N,steps:d}),z):l.createElement(A,Object.assign({},e,{strokeColor:L,prefixCls:N,direction:w}),z):"circle"!==y&&"dashboard"!==y||(X=l.createElement(P,Object.assign({},e,{strokeColor:L,prefixCls:N,progressStatus:S}),z));const _=i(N,`${N}-status-${S}`,`${N}-${("dashboard"===y?"circle":d&&"steps")||y}`,{[`${N}-inline-circle`]:"circle"===y&&D(f,"circle")[0]<=20,[`${N}-show-info`]:b,[`${N}-${f}`]:"string"==typeof f,[`${N}-rtl`]:"rtl"===w},null==O?void 0:O.className,u,p,R);return W(l.createElement("div",Object.assign({ref:s,style:Object.assign(Object.assign({},null==O?void 0:O.style),$),className:_,role:"progressbar","aria-valuenow":x},a(C,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),X))}));export{K as P};
