import{_ as e,K as n,C as t,a as o,b as r,c as a}from"./toConsumableArray-e86c248d.js";import{L as s,r as c}from"./render-187aeed7.js";import{r as i,e as l}from"./index-ec06099d.js";import{o as u,p as f,q as p,t as m,v as d,x as y,g,m as v,y as x,a as C,z as b,A as h}from"./index-0eb3c0bb.js";import{K as E,I as O,E as j}from"./KeyCode-c4e81b93.js";import{c as k}from"./index-f246fd73.js";var $=i.forwardRef((function(e,n){var t=e.prefixCls,o=e.style,r=e.className,a=e.duration,s=void 0===a?4.5:a,c=e.eventKey,l=e.content,m=e.closable,d=e.closeIcon,y=void 0===d?"x":d,g=e.props,v=e.onClick,x=e.onNoticeClose,C=e.times,b=i.useState(!1),h=u(b,2),O=h[0],j=h[1],$=function(){x(c)};i.useEffect((function(){if(!O&&s>0){var e=setTimeout((function(){$()}),1e3*s);return function(){clearTimeout(e)}}}),[s,O,C]);var N="".concat(t,"-notice");return i.createElement("div",f({},g,{ref:n,className:k(N,r,p({},"".concat(N,"-closable"),m)),style:o,onMouseEnter:function(){j(!0)},onMouseLeave:function(){j(!1)},onClick:v}),i.createElement("div",{className:"".concat(N,"-content")},l),m&&i.createElement("a",{tabIndex:0,className:"".concat(N,"-close"),onKeyDown:function(e){"Enter"!==e.key&&"Enter"!==e.code&&e.keyCode!==E.ENTER||$()},onClick:function(e){e.preventDefault(),e.stopPropagation(),$()}},y))})),N=i.forwardRef((function(n,t){var o=n.prefixCls,r=void 0===o?"rc-notification":o,a=n.container,s=n.motion,c=n.maxCount,p=n.className,y=n.style,g=n.onAllRemoved,v=i.useState([]),x=u(v,2),C=x[0],b=x[1],h=function(e){var n,t=C.find((function(n){return n.key===e}));null==t||null===(n=t.onClose)||void 0===n||n.call(t),b((function(n){return n.filter((function(n){return n.key!==e}))}))};i.useImperativeHandle(t,(function(){return{open:function(n){b((function(t){var o,r=e(t),a=r.findIndex((function(e){return e.key===n.key})),s=m({},n);a>=0?(s.times=((null===(o=t[a])||void 0===o?void 0:o.times)||0)+1,r[a]=s):(s.times=0,r.push(s));return c>0&&r.length>c&&(r=r.slice(-c)),r}))},close:function(e){h(e)},destroy:function(){b([])}}}));var E=i.useState({}),O=u(E,2),j=O[0],N=O[1];i.useEffect((function(){var e={};C.forEach((function(n){var t=n.placement,o=void 0===t?"topRight":t;o&&(e[o]=e[o]||[],e[o].push(n))})),Object.keys(j).forEach((function(n){e[n]=e[n]||[]})),N(e)}),[C]);var w=i.useRef(!1);if(i.useEffect((function(){Object.keys(j).length>0?w.current=!0:w.current&&(null==g||g(),w.current=!1)}),[j]),!a)return null;var P=Object.keys(j);return l.createPortal(i.createElement(i.Fragment,null,P.map((function(e){var n=j[e].map((function(e){return{config:e,key:e.key}})),t="function"==typeof s?s(e):s;return i.createElement(d,f({key:e,className:k(r,"".concat(r,"-").concat(e),null==p?void 0:p(e)),style:null==y?void 0:y(e),keys:n,motionAppear:!0},t,{onAllRemoved:function(){!function(e){N((function(n){var t=m({},n);return(t[e]||[]).length||delete t[e],t}))}(e)}}),(function(e,n){var t=e.config,o=e.className,a=e.style,s=t.key,c=t.times,l=t.className,u=t.style;return i.createElement($,f({},t,{ref:n,prefixCls:r,className:k(o,l),style:m(m({},a),u),times:c,key:s,eventKey:s,onNoticeClose:h}))}))}))),a)})),w=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],P=function(){return document.body},S=0;function I(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.getContainer,o=void 0===t?P:t,r=n.motion,a=n.prefixCls,s=n.maxCount,c=n.className,l=n.style,f=n.onAllRemoved,p=y(n,w),m=i.useState(),d=u(m,2),g=d[0],v=d[1],x=i.useRef(),C=i.createElement(N,{container:g,ref:x,prefixCls:a,motion:r,maxCount:s,className:c,style:l,onAllRemoved:f}),b=i.useState([]),h=u(b,2),E=h[0],O=h[1],j=i.useMemo((function(){return{open:function(n){var t=function(){for(var e={},n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return t.forEach((function(n){n&&Object.keys(n).forEach((function(t){var o=n[t];void 0!==o&&(e[t]=o)}))})),e}(p,n);null!==t.key&&void 0!==t.key||(t.key="rc-notification-".concat(S),S+=1),O((function(n){return[].concat(e(n),[{type:"open",config:t}])}))},close:function(n){O((function(t){return[].concat(e(t),[{type:"close",key:n}])}))},destroy:function(){O((function(n){return[].concat(e(n),[{type:"destroy"}])}))}}}),[]);return i.useEffect((function(){v(o())})),i.useEffect((function(){x.current&&E.length&&(E.forEach((function(e){switch(e.type){case"open":x.current.open(e.config);break;case"close":x.current.close(e.key);break;case"destroy":x.current.destroy()}})),O([]))}),[E]),[j,C]}const R=e=>{const{componentCls:t,iconCls:o,boxShadow:r,colorText:a,colorSuccess:s,colorError:c,colorWarning:i,colorInfo:l,fontSizeLG:u,motionEaseInOutCirc:f,motionDurationSlow:p,marginXS:m,paddingXS:d,borderRadiusLG:y,zIndexPopup:g,contentPadding:v,contentBg:C}=e,b=`${t}-notice`,h=new n("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:d,transform:"translateY(0)",opacity:1}}),E=new n("MessageMoveOut",{"0%":{maxHeight:e.height,padding:d,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),O={padding:d,textAlign:"center",[`${t}-custom-content > ${o}`]:{verticalAlign:"text-bottom",marginInlineEnd:m,fontSize:u},[`${b}-content`]:{display:"inline-block",padding:v,background:C,borderRadius:y,boxShadow:r,pointerEvents:"all"},[`${t}-success > ${o}`]:{color:s},[`${t}-error > ${o}`]:{color:c},[`${t}-warning > ${o}`]:{color:i},[`${t}-info > ${o},\n      ${t}-loading > ${o}`]:{color:l}};return[{[t]:Object.assign(Object.assign({},x(e)),{color:a,position:"fixed",top:m,width:"100%",pointerEvents:"none",zIndex:g,[`${t}-move-up`]:{animationFillMode:"forwards"},[`\n        ${t}-move-up-appear,\n        ${t}-move-up-enter\n      `]:{animationName:h,animationDuration:p,animationPlayState:"paused",animationTimingFunction:f},[`\n        ${t}-move-up-appear${t}-move-up-appear-active,\n        ${t}-move-up-enter${t}-move-up-enter-active\n      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:E,animationDuration:p,animationPlayState:"paused",animationTimingFunction:f},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[b]:Object.assign({},O)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},O),{padding:0,textAlign:"start"})}]},A=g("Message",(e=>{const n=v(e,{height:150});return[R(n)]}),(e=>({zIndexPopup:e.zIndexPopupBase+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`})),{clientOnly:!0});var M=globalThis&&globalThis.__rest||function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t};const T={info:i.createElement(O,null),success:i.createElement(t,null),error:i.createElement(o,null),warning:i.createElement(j,null),loading:i.createElement(s,null)},F=e=>{let{prefixCls:n,type:t,icon:o,children:r}=e;return i.createElement("div",{className:k(`${n}-custom-content`,`${n}-${t}`)},o||T[t],i.createElement("span",null,r))},z=e=>{const{prefixCls:n,className:t,type:o,icon:r,content:a}=e,s=M(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:c}=i.useContext(C),l=n||c("message"),[,u]=A(l);return i.createElement($,Object.assign({},s,{prefixCls:l,className:k(t,u,`${l}-notice-pure-panel`),eventKey:"pure",duration:null,content:i.createElement(F,{prefixCls:l,type:o,icon:r},a)}))};function D(e){let n;const t=new Promise((t=>{n=e((()=>{t(!0)}))})),o=()=>{null==n||n()};return o.then=(e,n)=>t.then(e,n),o.promise=t,o}var H=globalThis&&globalThis.__rest||function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t};const K=3,_=i.forwardRef(((e,n)=>{const{top:t,prefixCls:o,getContainer:a,maxCount:s,duration:c=K,rtl:l,transitionName:u,onAllRemoved:f}=e,{getPrefixCls:p,getPopupContainer:m,message:d}=i.useContext(C),y=o||p("message"),[,g]=A(y),v=i.createElement("span",{className:`${y}-close-x`},i.createElement(r,{className:`${y}-close-icon`})),[x,b]=I({prefixCls:y,style:()=>({left:"50%",transform:"translateX(-50%)",top:null!=t?t:8}),className:()=>k(g,{[`${y}-rtl`]:l}),motion:()=>function(e,n){return{motionName:null!=n?n:`${e}-move-up`}}(y,u),closable:!1,closeIcon:v,duration:c,getContainer:()=>(null==a?void 0:a())||(null==m?void 0:m())||document.body,maxCount:s,onAllRemoved:f});return i.useImperativeHandle(n,(()=>Object.assign(Object.assign({},x),{prefixCls:y,hashId:g,message:d}))),b}));let B=0;function L(e){const n=i.useRef(null);return[i.useMemo((()=>{const e=e=>{var t;null===(t=n.current)||void 0===t||t.close(e)},t=t=>{if(!n.current){const e=()=>{};return e.then=()=>{},e}const{open:o,prefixCls:r,hashId:a,message:s}=n.current,c=`${r}-notice`,{content:l,icon:u,type:f,key:p,className:m,style:d,onClose:y}=t,g=H(t,["content","icon","type","key","className","style","onClose"]);let v=p;return null==v&&(B+=1,v=`antd-message-${B}`),D((n=>(o(Object.assign(Object.assign({},g),{key:v,content:i.createElement(F,{prefixCls:r,type:f,icon:u},l),placement:"top",className:k(f&&`${c}-${f}`,a,m,null==s?void 0:s.className),style:Object.assign(Object.assign({},null==s?void 0:s.style),d),onClose:()=>{null==y||y(),n()}})),()=>{e(v)})))},o={open:t,destroy:t=>{var o;void 0!==t?e(t):null===(o=n.current)||void 0===o||o.destroy()}};return["info","success","warning","error","loading"].forEach((e=>{o[e]=(n,o,r)=>{let a,s,c;a=n&&"object"==typeof n&&"content"in n?n:{content:n},"function"==typeof o?c=o:(s=o,c=r);const i=Object.assign(Object.assign({onClose:c,duration:s},a),{type:e});return t(i)}})),o}),[]),i.createElement(_,Object.assign({key:"message-holder"},e,{ref:n}))]}let G=null,X=e=>e(),Y=[],W={};const q=i.forwardRef(((e,n)=>{const t=()=>{const{prefixCls:e,container:n,maxCount:t,duration:o,rtl:r,top:a}=function(){const{prefixCls:e,getContainer:n,duration:t,rtl:o,maxCount:r,top:a}=W;return{prefixCls:null!=e?e:h().getPrefixCls("message"),container:(null==n?void 0:n())||document.body,duration:t,rtl:o,maxCount:r,top:a}}();return{prefixCls:e,getContainer:()=>n,maxCount:t,duration:o,rtl:r,top:a}},[o,r]=i.useState(t),[a,s]=L(o),c=h(),l=c.getRootPrefixCls(),u=c.getIconPrefixCls(),f=c.getTheme(),p=()=>{r(t)};return i.useEffect(p,[]),i.useImperativeHandle(n,(()=>{const e=Object.assign({},a);return Object.keys(e).forEach((n=>{e[n]=function(){return p(),a[n].apply(a,arguments)}})),{instance:e,sync:p}})),i.createElement(b,{prefixCls:l,iconPrefixCls:u,theme:f},s)}));function U(){if(!G){const e=document.createDocumentFragment(),n={fragment:e};return G=n,void X((()=>{c(i.createElement(q,{ref:e=>{const{instance:t,sync:o}=e||{};Promise.resolve().then((()=>{!n.instance&&t&&(n.instance=t,n.sync=o,U())}))}}),e)}))}G.instance&&(Y.forEach((e=>{const{type:n,skipped:t}=e;if(!t)switch(n){case"open":X((()=>{const n=G.instance.open(Object.assign(Object.assign({},W),e.config));null==n||n.then(e.resolve),e.setCloseFn(n)}));break;case"destroy":X((()=>{null==G||G.instance.destroy(e.key)}));break;default:X((()=>{var t;const o=(t=G.instance)[n].apply(t,a(e.args));null==o||o.then(e.resolve),e.setCloseFn(o)}))}})),Y=[])}const J={open:function(e){const n=D((n=>{let t;const o={type:"open",config:e,resolve:n,setCloseFn:e=>{t=e}};return Y.push(o),()=>{t?X((()=>{t()})):o.skipped=!0}}));return U(),n},destroy:function(e){Y.push({type:"destroy",key:e}),U()},config:function(e){W=Object.assign(Object.assign({},W),e),X((()=>{var e;null===(e=null==G?void 0:G.sync)||void 0===e||e.call(G)}))},useMessage:function(e){return L(e)},_InternalPanelDoNotUseOrYouWillBeFired:z};["success","info","warning","error","loading"].forEach((e=>{J[e]=function(){for(var n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return function(e,n){const t=D((t=>{let o;const r={type:e,args:n,resolve:t,setCloseFn:e=>{o=e}};return Y.push(r),()=>{o?X((()=>{o()})):r.skipped=!0}}));return U(),t}(e,t)}}));const Q=J;export{$ as N,Q as m,I as u};
