import{r as e,a,w as n,x as l,u as s,b as t,j as o,L as i}from"./index-d981ad22.js";import{I as r}from"./index-63d26495.js";import{l as c,s as C,a as m}from"./user-28722b22.js";import{c as d}from"./index-f246fd73.js";import{I as u}from"./index-5af1edbc.js";import{m as g}from"./index-a374cbea.js";import{B as p}from"./button-71824e1f.js";import{T as h}from"./index-3d398881.js";import{L as w}from"./logo-4f81033e.js";import"./request-6150d4f8.js";import"./BaseUrl-9fb7060e.js";import"./index-9f063626.js";import"./context-87979842.js";import"./render-d35390e1.js";import"./Compact-f7c979a2.js";import"./toConsumableArray-6b865d6a.js";import"./useMergedState-2aa398f6.js";import"./useLayoutEffect-54d4d64e.js";import"./KeyCode-073d009d.js";const L={login:"_login_1nmmj_1",logo:"_logo_1nmmj_10","content-area":"_content-area_1nmmj_18",slogan:"_slogan_1nmmj_32","from-box":"_from-box_1nmmj_39",copyright:"_copyright_1nmmj_60","login-section":"_login-section_1nmmj_75","sub-title":"_sub-title_1nmmj_79","other-way":"_other-way_1nmmj_91","google-auth":"_google-auth_1nmmj_94",line:"_line_1nmmj_114","line-word":"_line-word_1nmmj_120","line-bg":"_line-bg_1nmmj_129","find-pass":"_find-pass_1nmmj_134","submit-btn":"_submit-btn_1nmmj_142"};function b(a){return e.createElement("svg",{width:285,height:29,viewBox:"0 0 285 29",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a},e.createElement("path",{d:"M8.616 21L0.808 0.967999H5.992L6.088 1.352C6.088 1.352 4.552 1.672 5.16 3.4L11.176 18.696L15.496 7.88L12.808 0.967999H18.536L18.632 1.352C18.632 1.352 16.84 1.64 17.448 3.24L23.304 18.312L28.744 4.808L25.704 0.967999H31.112L23.08 21H20.616L15.944 8.968L11.112 21H8.616ZM28.8625 14.056C28.7665 9.64 32.5425 6.568 37.1185 6.568C42.0145 6.568 43.7425 9.8 43.7425 11.432H32.3505C32.2225 12.04 32.1905 12.712 32.2225 13.448C32.4465 16.488 34.9425 18.824 38.3345 18.952C40.1585 19.048 42.0465 18.344 43.2305 16.776L43.5505 17.16C42.0785 19.88 39.1665 21.192 36.1905 21.192C32.3505 21.192 28.9265 18.376 28.8625 14.056ZM37.1505 7.048C34.8465 7.048 33.1505 8.456 32.5105 10.632H40.5105C40.5105 10.632 40.2225 7.08 37.1505 7.048ZM45.1088 1.288V0.903999H50.0688V18.728C50.0688 19.848 50.6128 20.488 51.6688 20.584V21H46.7088V3.048C46.7088 1.928 46.1648 1.352 45.1088 1.288ZM52.893 14.184C52.893 9.416 57.021 6.632 61.149 6.632C62.333 6.632 63.901 6.952 64.989 7.176L66.333 6.568V11.528L63.421 7.496C62.845 7.24 61.757 7.112 61.213 7.112C54.397 7.112 54.141 18.856 62.205 18.856C63.965 18.856 65.789 18.088 66.621 16.776L66.941 17.16C65.565 19.944 62.717 21.192 60.349 21.192C57.149 21.16 52.893 19.144 52.893 14.184ZM68.5188 14.12C68.5188 9.064 72.8068 6.6 76.1988 6.6C79.3348 6.6 83.3668 8.904 83.3668 13.672C83.3668 18.664 79.3028 21.288 75.6548 21.288C72.4868 21.288 68.5188 19.08 68.5188 14.12ZM73.1908 8.232C69.4468 11.528 72.4227 19.976 77.1588 19.976C77.7348 19.976 78.3428 19.88 78.9508 19.592C82.7268 15.816 79.3028 7.912 74.7908 7.912C74.2468 7.912 73.7348 8.008 73.1908 8.232ZM84.7978 21V20.584C84.7978 20.584 86.3658 20.52 86.3658 18.76V9.096C86.3658 7.912 85.8538 7.272 84.7978 7.208V6.824H88.1258L89.4698 8.456L89.5338 9.8C90.1418 8.488 91.4218 6.664 94.0138 6.664C95.7098 6.664 97.5658 7.656 98.1098 9.832C98.6538 8.552 100.03 6.664 102.654 6.664C105.15 6.664 107.358 8.584 107.39 12.04V18.728C107.39 19.912 107.902 20.552 108.958 20.584V21H104.062V12.264C104.062 9.608 103.518 7.944 101.822 7.944C100.094 7.944 98.9098 9.448 98.3338 10.6C98.5578 11.08 98.6538 12.136 98.6538 12.584V18.952L100.254 21H93.4698V20.584C93.4698 20.584 95.3258 20.36 95.3258 18.6V12.264C95.3258 9.64 94.8138 7.88 93.2138 7.88C91.3898 7.88 90.2378 9.448 89.7258 10.696V19.176L88.0618 21H84.7978ZM110.238 14.056C110.142 9.64 113.918 6.568 118.494 6.568C123.39 6.568 125.118 9.8 125.118 11.432H113.726C113.598 12.04 113.566 12.712 113.598 13.448C113.822 16.488 116.318 18.824 119.71 18.952C121.534 19.048 123.422 18.344 124.606 16.776L124.926 17.16C123.454 19.88 120.542 21.192 117.566 21.192C113.726 21.192 110.302 18.376 110.238 14.056ZM118.526 7.048C116.222 7.048 114.526 8.456 113.886 10.632H121.886C121.886 10.632 121.598 7.08 118.526 7.048ZM136.652 7.464H134.476V6.824H134.764C136.812 6.664 137.708 5.128 137.708 3.912C137.708 2.824 137.26 2.28 136.652 2.28V1.928H140.14C141.292 4.392 139.084 6.376 137.26 6.824H143.564V7.464H140.012V15.656C140.012 18.76 140.78 20.072 142.06 20.424C142.092 20.424 143.596 17.128 143.596 17.128L143.852 21H141.516C139.34 21 136.652 20.072 136.652 15.656V7.464ZM144.831 14.12C144.831 9.064 149.119 6.6 152.511 6.6C155.647 6.6 159.679 8.904 159.679 13.672C159.679 18.664 155.615 21.288 151.967 21.288C148.799 21.288 144.831 19.08 144.831 14.12ZM149.503 8.232C145.759 11.528 148.735 19.976 153.471 19.976C154.047 19.976 154.655 19.88 155.263 19.592C159.039 15.816 155.615 7.912 151.103 7.912C150.559 7.912 150.047 8.008 149.503 8.232ZM171.119 21H168.751V20.584C168.751 20.584 170.319 20.424 170.319 18.76V3.976L169.071 1H172.847L179.951 18.12L187.055 1H191.055V1.48C191.055 1.48 189.455 1.64 189.455 4.168V18.76C189.455 20.424 191.055 20.584 191.055 20.584V21H186.095V5.416L179.759 20.68V21H177.551L171.119 5.832V21ZM192.394 14.056C192.298 9.64 196.074 6.568 200.65 6.568C205.546 6.568 207.274 9.8 207.274 11.432H195.882C195.754 12.04 195.722 12.712 195.754 13.448C195.978 16.488 198.474 18.824 201.866 18.952C203.69 19.048 205.578 18.344 206.762 16.776L207.082 17.16C205.61 19.88 202.698 21.192 199.722 21.192C195.882 21.192 192.458 18.376 192.394 14.056ZM200.682 7.048C198.378 7.048 196.682 8.456 196.042 10.632H204.042C204.042 10.632 203.754 7.08 200.682 7.048ZM210.496 7.464H208.32V6.824H208.608C210.656 6.664 211.552 5.128 211.552 3.912C211.552 2.824 211.104 2.28 210.496 2.28V1.928H213.984C215.136 4.392 212.928 6.376 211.104 6.824H217.408V7.464H213.856V15.656C213.856 18.76 214.624 20.072 215.904 20.424C215.936 20.424 217.44 17.128 217.44 17.128L217.696 21H215.36C213.184 21 210.496 20.072 210.496 15.656V7.464ZM223.62 21.224C221.54 21.224 219.428 19.944 219.556 17.64C219.812 13.32 226.18 14.152 228.932 11.304V10.152C228.932 8.104 227.62 7.4 226.148 7.4C225.636 7.4 225.124 7.496 224.612 7.624L220.676 11.784L220.644 6.536L222.116 7.464C223.62 6.984 225.124 6.664 226.372 6.6C229.316 6.472 232.26 7.656 232.324 11.048V18.952C232.324 20.52 233.572 20.584 233.604 20.584V21H230.564L228.996 19.272L228.932 18.28C227.876 19.528 225.924 21.224 223.62 21.224ZM223.652 17.064C223.588 18.44 224.484 19.24 225.7 19.24C226.692 19.24 227.876 18.696 228.932 17.544V12.392C226.66 13.768 223.78 14.536 223.652 17.064ZM234.918 24.584C234.918 21.96 237.286 20.456 238.246 20.008C236.486 18.888 235.11 16.968 235.11 14.152C235.11 9.064 239.622 6.6 243.174 6.6C244.678 6.6 246.406 7.08 247.782 8.136L248.39 5.352H251.462L248.55 8.68C249.798 9.832 250.694 11.496 250.694 13.672C250.694 18.664 246.086 21.288 242.47 21.288C241.286 21.288 239.974 20.968 238.822 20.36C238.022 20.744 236.102 21.896 236.166 23.752C236.198 24.712 236.614 25.096 237.254 25.096C239.334 25.096 243.878 21.576 247.11 21.576C251.206 21.576 251.526 26.088 249.03 28.424H244.07C244.07 28.424 248.358 25.416 248.358 23.304C248.358 22.664 247.942 22.12 247.174 22.12C244.518 22.12 241.702 28.424 238.15 28.424C236.102 28.424 234.918 26.44 234.918 24.584ZM240.006 8.136C235.974 11.56 239.206 20.104 244.198 20.104C244.806 20.104 245.446 19.976 246.086 19.72C250.054 16.136 246.31 7.816 241.574 7.816C241.062 7.816 240.518 7.912 240.006 8.136ZM255.424 21.64L252.992 19.208L255.424 16.808L257.824 19.208L255.424 21.64ZM264.837 21H259.525L261.829 17.704L266.565 1.928C265.861 1.48 265.125 1.384 265.125 1.384V0.967999H270.245L276.805 21H271.557L271.429 20.584C271.429 20.584 273.029 20.296 272.485 18.568L270.885 13.64H263.909L262.661 17.768L264.837 21ZM264.165 12.84H270.629L267.557 3.176C267.429 2.92 267.333 2.696 267.173 2.504L264.165 12.84ZM279.149 18.888V3.144C279.085 1.48 277.581 1.384 277.581 1.384V1H284.077V1.384C284.077 1.384 282.573 1.48 282.509 3.144V18.888C282.573 20.424 284.109 20.584 284.109 20.584V21H277.581V20.584C277.581 20.584 279.085 20.424 279.149 18.888Z",fill:"white"}))}function v(a){return e.createElement("svg",{t:1679997665559,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":2031,xmlnsXlink:"http://www.w3.org/1999/xlink",width:200,height:200,...a},e.createElement("path",{d:"M925.915429 521.545143c0.512-29.622857-2.56-59.282286-9.033143-88.100572H512v160.036572h237.714286a210.468571 210.468571 0 0 1-88.137143 139.885714l-0.804572 5.302857 127.963429 99.181715 8.850286 0.841142c81.298286-75.154286 128.365714-185.782857 128.365714-317.147428",fill:"#4285F4","p-id":2032}),e.createElement("path",{d:"M512 943.177143c116.370286 0 214.198857-38.363429 285.622857-104.484572l-136.045714-105.472a254.829714 254.829714 0 0 1-149.430857 43.117715 259.949714 259.949714 0 0 1-245.394286-179.273143l-5.12 0.512-133.083429 102.912-1.682285 4.754286a429.860571 429.860571 0 0 0 385.097143 237.897142",fill:"#34A853","p-id":2033}),e.createElement("path",{d:"M266.605714 597.211429a264.045714 264.045714 0 0 1-14.336-85.357715c0.182857-28.964571 4.937143-57.782857 13.970286-85.394285l-0.146286-5.632-134.802285-104.594286-4.425143 2.011428a430.262857 430.262857 0 0 0 0 387.181715l139.702857-108.214857",fill:"#FBBC05","p-id":2034}),e.createElement("path",{d:"M512 247.515429a237.933714 237.933714 0 0 1 166.656 64.256l121.673143-118.784a414.646857 414.646857 0 0 0-288.512-112.128 430.811429 430.811429 0 0 0-385.316572 237.714285l139.410286 108.251429A260.973714 260.973714 0 0 1 512 247.478857",fill:"#EB4335","p-id":2035}))}function _(){const t=a(),o=n(),[i]=l(),{userStore:r}=s();return e.useCallback((()=>{var e;let a;1===r.info.status?a=(null==(e=o.state)?void 0:e.from)||i.get("redirect")||"/":2===r.info.status?a="/checkEmail":3===r.info.status&&(a="/inviteCode"),t(a,{replace:!0})}),[])}let f;function H(){const[a,n]=e.useState(!1),{userStore:l}=s(),t=_(),o=()=>{f=window.google.accounts.oauth2.initCodeClient({client_id:"150983249617-81s47v75at8cburruesor16nr2gbope2.apps.googleusercontent.com",scope:"openid email profile",ux_mode:"popup",callback:async e=>{try{const a=await c(e.code);l.setUserInfo(a),t()}catch{}n(!1)},error_callback:()=>{n(!1)}}),f.requestCode()};return{login:()=>{var e;if(n(!0),window.google)f?f.requestCode():o();else{const a=document.createElement("script");a.src="https://accounts.google.com/gsi/client",a.onload=()=>{o()},a.onerror=()=>{a.remove(),n(!1)},null==(e=document.querySelector("body"))||e.appendChild(a)}},loading:a}}const V=a=>{const[n,l]=e.useState(!1),[s,i]=e.useState(!0),r=e.useRef(null),{label:c,type:C,onBlur:m,onFocus:g,onChange:p,...h}=a;e.useEffect((()=>{r.current.input.value.length&&i(!1)}),[]);const w=e.useCallback((e=>{l(!0),null==g||g(e)}),[]),L=e.useCallback((()=>{r.current.input.value.length?i(!1):i(!0)}),[]),b=e.useCallback((e=>{l(!1),L(),null==m||m(e)}),[]),v=e.useCallback((e=>{L(),null==p||p(e)}),[]),_=e.useMemo((()=>t("password"===C?u.Password:u,{...h,ref:r,onFocus:w,onBlur:b,onChange:v})),[C,h]);return o("div",{className:d("m-google-input",{"is-empty":s,"is-active":n}),children:[_,t("label",{className:"m-google-input-label",children:c})]})};function j(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}const M=()=>{const a=_(),n=H(),{userStore:l}=s(),[c,m]=e.useState(!1),[d,u]=e.useState({name:"",email:"",passwd:""}),h=e.useCallback((e=>{u((a=>({...a,name:e.target.value})))}),[]),w=e.useCallback((e=>{u((a=>({...a,email:e.target.value})))}),[]),f=e.useCallback((e=>{u((a=>({...a,passwd:e.target.value})))}),[]),M=e.useCallback((()=>{let e,a=!0;return d.name.length?d.email.length?j(d.email)?d.passwd.length||(e="Password is required",a=!1):(e="Please check if your email is correct",a=!1):(e="Email is required",a=!1):(e="Name is required",a=!1),a||g.open({type:"warning",content:e}),a}),[d]),y=e.useCallback((()=>{M()&&(m(!0),C({...d,locate:navigator.language}).then((e=>{1e4===e.code?(l.setUserInfo(e.user),a()):g.open({type:"error",content:e.message})})).finally((()=>{m(!1)})))}),[d]);return o("div",{className:L["login-section"],children:[t(r,{className:L.welcome,icon:b}),o("div",{className:L["sub-title"],children:["Already have an account? ",t(i,{to:"/login",replace:!0,children:" Log in"})]}),t("div",{className:L["other-way"],children:o(p,{className:L["google-auth"],loading:n.loading,onClick:n.login,children:[t(r,{icon:v}),"Continue with Google"]})}),o("div",{className:L.line,children:[t("div",{className:L["line-bg"]}),t("div",{className:L["line-word"],children:"OR"}),t("div",{className:L["line-bg"]})]}),t(V,{label:"User name",value:d.name,onPressEnter:y,onChange:h}),t(V,{label:"Email address",value:d.email,onPressEnter:y,onChange:w}),t(V,{label:"Password",type:"password",autoComplete:"new-password",onPressEnter:y,onChange:f}),t(p,{className:L["submit-btn"],loading:c,onClick:y,children:"Create account"})]})},y=()=>{const a=_(),n=H(),{userStore:l}=s(),[c,C]=e.useState(!1),[d,u]=e.useState({email:"",passwd:""}),h=e.useCallback((e=>{u((a=>({...a,email:e.target.value})))}),[]),w=e.useCallback((e=>{u((a=>({...a,passwd:e.target.value})))}),[]),f=e.useCallback((()=>{let e,a=!0;return d.email.length?j(d.email)?d.passwd.length||(e="Password is required",a=!1):(e="Please check if your email is correct",a=!1):(e="Email is required",a=!1),a||g.open({type:"warning",content:e}),a}),[d]),M=e.useCallback((()=>{f()&&(C(!0),m(d).then((e=>{1e4===e.code?0!==e.user.status?(l.setUserInfo(e.user),a()):g.open({type:"warning",content:"account is disabled"}):g.open({type:"error",content:e.message})})).finally((()=>{C(!1)})))}),[d]);return o("div",{className:L["login-section"],children:[t(r,{className:L.welcome,icon:b}),o("div",{className:L["sub-title"],children:["Already have an account? ",t(i,{to:"/register",replace:!0,children:" Sign up"})]}),t("div",{className:L["other-way"],children:o(p,{className:L["google-auth"],loading:n.loading,onClick:n.login,children:[t(r,{icon:v}),"Continue with Google"]})}),o("div",{className:L.line,children:[t("div",{className:L["line-bg"]}),t("div",{className:L["line-word"],children:"OR"}),t("div",{className:L["line-bg"]})]}),t(V,{label:"Email address",value:d.email,onChange:h,onPressEnter:M}),t(V,{label:"Password",type:"password",autoComplete:"new-password",onChange:w,onPressEnter:M}),t(p,{className:L["submit-btn"],loading:c,onClick:M,children:"Log In"})]})},N=()=>{const{pathname:a}=n(),l=e.useMemo((()=>"/login"===a?t(y,{}):"/register"===a?t(M,{}):"/forgot_password"===a?null:void 0),[a]);return o("div",{className:L.login,children:[t("h1",{className:L.logo,children:t(i,{to:"/index",children:t("img",{src:w,alt:""})})}),o("div",{className:L["content-area"],children:[t("div",{className:L.slogan,children:t("img",{src:"/assets/slogan-1375f1ec.png",alt:""})}),t("div",{className:L["from-box"],children:l})]}),t("div",{className:L.copyright,children:t(h,{})})]})};export{N as default};
